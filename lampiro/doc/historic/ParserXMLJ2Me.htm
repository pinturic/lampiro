<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<meta name="robots" content="index,nofollow">

<title>ParserXMLJ2Me - Wiki del Coso</title>
<script type="text/javascript" src="/coso/wiki/htdocs/common/js/common.js"></script>

<script type="text/javascript">
<!--// common functions

// We keep here the state of the search box
searchIsDisabled = false;

function searchChange(e) {
    // Update search buttons status according to search box content.
    // Ignore empty or whitespace search term.
    var value = e.value.replace(/\s+/, '');
    if (value == '' || searchIsDisabled) { 
        searchSetDisabled(true);
    } else {
        searchSetDisabled(false);
    }
}

function searchSetDisabled(flag) {
    // Enable or disable search
    document.getElementById('fullsearch').disabled = flag;
    document.getElementById('titlesearch').disabled = flag;
}

function searchFocus(e) {
    // Update search input content on focus
    if (e.value == 'Search') {
        e.value = '';
        e.className = '';
        searchIsDisabled = false;
    }
}

function searchBlur(e) {
    // Update search input content on blur
    if (e.value == '') {
        e.value = 'Search';
        e.className = 'disabled';
        searchIsDisabled = true;
    }
}

function actionsMenuInit(title) {
    // Initialize action menu
    for (i = 0; i < document.forms.length; i++) {
        var form = document.forms[i];
        if (form.className == 'actionsmenu') {
            // Check if this form needs update
            var div = form.getElementsByTagName('div')[0];
            var label = div.getElementsByTagName('label')[0];
            if (label) {
                // This is the first time: remove label and do buton.
                div.removeChild(label);
                var dobutton = div.getElementsByTagName('input')[0];
                div.removeChild(dobutton);
                // and add menu title
                var select = div.getElementsByTagName('select')[0];
                var item = document.createElement('option');
                item.appendChild(document.createTextNode(title));
                item.value = 'show';
                select.insertBefore(item, select.options[0]);
                select.selectedIndex = 0;
            }
        }
    }
}
//-->
</script>

<script type="text/javascript">
var gui_editor_link_href = "/coso/wiki/moin.cgi/ParserXMLJ2Me?action=edit&editor=gui";
var gui_editor_link_text = "Edit (GUI)";
</script>        

<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/coso/wiki/htdocs/classic/css/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="/coso/wiki/htdocs/classic/css/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="/coso/wiki/htdocs/classic/css/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="/coso/wiki/htdocs/classic/css/projection.css">


<link rel="Start" href="/coso/wiki/moin.cgi/HelpOnLanguages">
<link rel="Alternate" title="Formattazione Wiki" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=raw">
<link rel="Alternate" media="print" title="Versione stampabile" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=print">
<link rel="Search" href="/coso/wiki/moin.cgi/CercaPagina">
<link rel="Index" href="/coso/wiki/moin.cgi/IndiceDeiTitoli">
<link rel="Glossary" href="/coso/wiki/moin.cgi/IndicePerParola">
<link rel="Help" href="/coso/wiki/moin.cgi/AiutoSuFormattazione">
</head>

<body  lang="it" dir="ltr">



<div id="header">
<div id="logo"><a href="/coso/wiki/moin.cgi/HelpOnLanguages">Wiki del Coso</a></div>

<form id="searchform" method="get" action="">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput">Cerca:</label>
<input id="searchinput" type="text" name="value" value="" size="20"
    onfocus="searchFocus(this)" onblur="searchBlur(this)"
    onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search">
<input id="titlesearch" name="titlesearch" type="submit"
    value="Titoli" alt="Search Titles">
<input id="fullsearch" name="fullsearch" type="submit"
    value="Testo" alt="Search Full Text">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a class="nonexistent nonexistent" href="/coso/wiki/moin.cgi/LucianoMollea" title="LucianoMollea @ Self">LucianoMollea</a></li><li><a href="/coso/wiki/moin.cgi/PreferenzeUtente">PreferenzeUtente</a></li><li><form action="" method="POST">
<input type="hidden" name="action" value="userform">
<input type="submit" name="logout" value="Logout">
</form>
</li></ul>
<div id="locationline">


<ul id="pagelocation">
<li><a class="backlink" title="Clicca qui per effettuare una ricerca full-text per questo titolo" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=fullsearch&amp;value=linkto%3A%22ParserXMLJ2Me%22&amp;context=180">ParserXMLJ2Me</a></li>
</ul>

</div>

<ul id="pagetrail">
<li><a href="/coso/wiki/moin.cgi/OperatoDelCosillo">OperatoDelCosillo</a></li><li><a href="/coso/wiki/moin.cgi/ModificheRecenti">ModificheRecenti</a></li><li><a href="/coso/wiki/moin.cgi/BookMark">BookMark</a></li><li><a href="/coso/wiki/moin.cgi/FrontPage">FrontPage</a></li><li><a href="/coso/wiki/moin.cgi/ParserXMLJ2Me">ParserXMLJ2Me</a></li>
</ul>
<ul id="iconbar">
<li><a title="Modifica" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=edit"><img alt="Modifica" height="12" src="/coso/wiki/htdocs/classic/img/moin-edit.png" title="Modifica" width="12" /></a></li>
<li><a title="mostra" href="/coso/wiki/moin.cgi/ParserXMLJ2Me"><img alt="mostra" height="13" src="/coso/wiki/htdocs/classic/img/moin-show.png" title="mostra" width="12" /></a></li>
<li><a title="differenze" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=diff"><img alt="differenze" height="11" src="/coso/wiki/htdocs/classic/img/moin-diff.png" title="differenze" width="15" /></a></li>
<li><a title="Informazioni" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=info"><img alt="Informazioni" height="11" src="/coso/wiki/htdocs/classic/img/moin-info.png" title="Informazioni" width="12" /></a></li>
<li><a title="Sottoscrivi" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=subscribe"><img alt="Sottoscrivi" height="10" src="/coso/wiki/htdocs/classic/img/moin-subscribe.png" title="Sottoscrivi" width="14" /></a></li>
<li><a title="Non formattato" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=raw"><img alt="Non formattato" height="13" src="/coso/wiki/htdocs/classic/img/moin-raw.png" title="Non formattato" width="12" /></a></li>
<li><a title="Versione stampabile" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=print"><img alt="Versione stampabile" height="14" src="/coso/wiki/htdocs/classic/img/moin-print.png" title="Versione stampabile" width="16" /></a></li>
</ul>


<ul id="navibar">
<li class="wikilink"><a href="/coso/wiki/moin.cgi/HelpOnLanguages">HelpOnLanguages</a></li><li class="wikilink"><a href="/coso/wiki/moin.cgi/ModificheRecenti">ModificheRecenti</a></li><li class="wikilink"><a href="/coso/wiki/moin.cgi/CercaPagina">CercaPagina</a></li><li class="wikilink"><a href="/coso/wiki/moin.cgi/AiutoContenuti">AiutoContenuti</a></li><li class="current"><a href="/coso/wiki/moin.cgi/ParserXMLJ2Me">ParserXMLJ2Me</a></li>
</ul>


</div>



<div id="page" lang="en" dir="ltr">

<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span>
<h1 id="head-35c8f9eeadaace2402bf447ce976b9bd437685f9">Parser XML per J2Me</h1>
<span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line886">Premessa: non ce ne frega nulla di supportare il 100% dell'XML, ci basta supportare quello che si trova in XMPP <span class="anchor" id="line-4"></span></p><span class="anchor" id="line-5"></span><p class="line886">Usando HTTPBind, non abbiamo più il problema di parser bind (c'e' sempre un documento). L'unica operazione  da fare quindi è produrre un albero dom dagli eventi del parser pull di kxml. kxml contiene già kdom (come minimo potremmo eliminare Document, che intanto non ci serve). Con delle prove c'è da valutare quando sia pesante il resto del DOM di kdom, perché, prendendo spunto dal python in basso alla pagina, ce la potremmo cavare con una classe Java come quella qui sotto, che occupa poco più di 1 KB nella versione "solo interfaccia". Inoltre su questa classe potremmo risparmiare byte eliminando alcuni accessors che non fanno altro che scrivere/leggere campi di tipo String (es. getName). <span class="anchor" id="line-6"></span></p><span class="anchor" id="line-7"></span><p class="line886">Morale, Luca, prova a fare il codice che costruisce il DOM di una serie di messaggi con con kdom e con un elemento del genere e vedi quale occupa meno spazio (la memoria occupa runtime mi preoccupa di meno, perché intanto avremmo pochi elementi da trattare alla volta, uno o due al massimo). L'unico motivo che mi spinge a rimanere con kdom è che si integra con il serializzatore di kxml, mentre qui dovremmo risciverci il metod toXml, che richiede tempo e spazio! <span class="anchor" id="line-8"></span></p><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><span class="anchor" id="line-88"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c))
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        s.className = 'LineNumber'
        s.appendChild(document.createTextNode(nformat(n,4,' ')));
        n += nstep;
        if (l.childNodes.length)
          l.insertBefore(s, l.firstChild)
        else
          l.appendChild(s)
      }
      l = l.nextSibling;
    }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c))
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-eb9375359ea27469d1a7018f1473cf29dd60390a_000\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-eb9375359ea27469d1a7018f1473cf29dd60390a_000" lang="en"><span class="line"><span class="LineNumber">   1 </span><span class="Comment">/**</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="Comment"> * Lightweight DOM like Element holding any XMPP packet</span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="Comment"> */</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="ResWord">public</span> <span class="ResWord">class</span> <span class="ID">Element</span> <span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber">   5 </span></span>
<span class="line"><span class="LineNumber">   6 </span>    <span class="ResWord">public</span> <span class="ID">Vector</span> <span class="ID">children</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   7 </span>    <span class="Comment">// we use at most 3/4 attributes, perhaps a Vector makes more sense </span></span>
<span class="line"><span class="LineNumber">   8 </span>    <span class="Comment">// (54 bytes saved, but the difference in the accessors?)</span></span>
<span class="line"><span class="LineNumber">   9 </span>    <span class="Comment">//private Hashtable attributes; </span></span>
<span class="line"><span class="LineNumber">  10 </span>    <span class="ResWord">public</span> <span class="ID">Vector</span> <span class="ID">attributes</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  11 </span>    <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">content</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  12 </span>    <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">name</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  13 </span>    <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">uri</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  14 </span>    <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">defaultUri</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  15 </span>    </span>
<span class="line"><span class="LineNumber">  16 </span>    <span class="ResWord">public</span> <span class="ID">Element</span> <span class="ID">parent</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  17 </span>        </span>
<span class="line"><span class="LineNumber">  18 </span>    <span class="ResWord">static</span> <span class="ResWord">int</span> <span class="ID">id</span><span class="SPChar">;</span> <span class="Comment">//unique id</span></span>
<span class="line"><span class="LineNumber">  19 </span>        </span>
<span class="line"><span class="LineNumber">  20 </span>    <span class="ResWord">public</span> <span class="ID">Element</span><span class="SPChar">(</span><span class="ID">String</span> <span class="ID">uri</span><span class="SPChar">,</span> <span class="ID">String</span> <span class="ID">name</span><span class="SPChar">,</span> <span class="ID">String</span> <span class="ID">defaultUri</span><span class="SPChar">)</span><span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber">  21 </span>        <span class="ID">children</span> <span class="SPChar">=</span> <span class="ResWord">new</span> <span class="ID">Vector</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  22 </span>        <span class="Comment">//attributes = new Hashtable();</span></span>
<span class="line"><span class="LineNumber">  23 </span>        <span class="ID">attributes</span> <span class="SPChar">=</span> <span class="ResWord">new</span> <span class="ID">Vector</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">;</span><span class="Comment">//Hashtable();</span></span>
<span class="line"><span class="LineNumber">  24 </span>    <span class="SPChar">}</span></span>
<span class="line"><span class="LineNumber">  25 </span></span>
<span class="line"><span class="LineNumber">  26 </span>    <span class="Comment">//public String getName(String name){</span></span>
<span class="line"><span class="LineNumber">  27 </span>    <span class="Comment">//    return null;</span></span>
<span class="line"><span class="LineNumber">  28 </span>    <span class="Comment">//}</span></span>
<span class="line"><span class="LineNumber">  29 </span>    </span>
<span class="line"><span class="LineNumber">  30 </span>    <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">getUri</span><span class="SPChar">(</span><span class="ID">String</span> <span class="ID">name</span><span class="SPChar">)</span><span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber">  31 </span>        <span class="ResWord">return</span> <span class="ConsWord">null</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  32 </span>    <span class="SPChar">}</span></span>
<span class="line"><span class="LineNumber">  33 </span></span>
<span class="line"><span class="LineNumber">  34 </span>    <span class="Comment">// theorically attributes may have prefixes too, but I don't remember any</span></span>
<span class="line"><span class="LineNumber">  35 </span>    <span class="Comment">// jabber packet using them</span></span>
<span class="line"><span class="LineNumber">  36 </span>    <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">getAttribute</span><span class="SPChar">(</span><span class="ID">String</span> <span class="ID">name</span><span class="SPChar">)</span><span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber">  37 </span>        <span class="ResWord">return</span> <span class="ConsWord">null</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  38 </span>    <span class="SPChar">}</span></span>
<span class="line"><span class="LineNumber">  39 </span>    </span>
<span class="line"><span class="LineNumber">  40 </span>    <span class="Comment">//public String setAttribute(String name, String value){</span></span>
<span class="line"><span class="LineNumber">  41 </span>    <span class="Comment">//    return null;</span></span>
<span class="line"><span class="LineNumber">  42 </span>    <span class="Comment">//}</span></span>
<span class="line"><span class="LineNumber">  43 </span>    </span>
<span class="line"><span class="LineNumber">  44 </span>    <span class="Comment">// public boolean hasAttribute(String name){</span></span>
<span class="line"><span class="LineNumber">  45 </span>    <span class="Comment">//    return false;</span></span>
<span class="line"><span class="LineNumber">  46 </span>    <span class="Comment">//}</span></span>
<span class="line"><span class="LineNumber">  47 </span></span>
<span class="line"><span class="LineNumber">  48 </span>    <span class="Comment">// useful for making replies</span></span>
<span class="line"><span class="LineNumber">  49 </span>    <span class="Comment">// the only signature of this method costs 96 bytes;</span></span>
<span class="line"><span class="LineNumber">  50 </span>    <span class="Comment">//public void swapAttributes(String left, String right){</span></span>
<span class="line"><span class="LineNumber">  51 </span>    <span class="Comment">//}</span></span>
<span class="line"><span class="LineNumber">  52 </span></span>
<span class="line"><span class="LineNumber">  53 </span>    <span class="Comment">//public void addChild(Element node){</span></span>
<span class="line"><span class="LineNumber">  54 </span>    <span class="Comment">//}</span></span>
<span class="line"><span class="LineNumber">  55 </span></span>
<span class="line"><span class="LineNumber">  56 </span>    <span class="Comment">// add text</span></span>
<span class="line"><span class="LineNumber">  57 </span>    <span class="Comment">//public void addContent(String text){</span></span>
<span class="line"><span class="LineNumber">  58 </span>    <span class="Comment">//}</span></span>
<span class="line"><span class="LineNumber">  59 </span></span>
<span class="line"><span class="LineNumber">  60 </span>    <span class="Comment">// easy creation a of child</span></span>
<span class="line"><span class="LineNumber">  61 </span>    <span class="ResWord">public</span> <span class="ID">Element</span> <span class="ID">addElement</span><span class="SPChar">(</span><span class="ID">String</span> <span class="ID">uri</span><span class="SPChar">,</span> <span class="ID">String</span> <span class="ID">name</span><span class="SPChar">,</span> <span class="ID">String</span> <span class="ID">defaultUri</span><span class="SPChar">)</span><span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber">  62 </span>        <span class="ResWord">return</span> <span class="ConsWord">null</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  63 </span>    <span class="SPChar">}</span></span>
<span class="line"><span class="LineNumber">  64 </span></span>
<span class="line"><span class="LineNumber">  65 </span>    <span class="Comment">// set the id attribute to the element, using the static id class field</span></span>
<span class="line"><span class="LineNumber">  66 </span>    <span class="ResWord">public</span> <span class="ResWord">static</span> <span class="ResWord">void</span> <span class="ID">createUniqueId</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber">  67 </span>    <span class="SPChar">}</span></span>
<span class="line"><span class="LineNumber">  68 </span></span>
<span class="line"><span class="LineNumber">  69 </span>    <span class="Comment">//public Vector elements(){</span></span>
<span class="line"><span class="LineNumber">  70 </span>    <span class="Comment">//    return null;</span></span>
<span class="line"><span class="LineNumber">  71 </span>    <span class="Comment">//}</span></span>
<span class="line"><span class="LineNumber">  72 </span></span>
<span class="line"><span class="LineNumber">  73 </span>    <span class="Comment">// serialize the element and all its children</span></span>
<span class="line"><span class="LineNumber">  74 </span>    <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">toXml</span><span class="SPChar">(</span><span class="SPChar">)</span><span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber">  75 </span>        <span class="ResWord">return</span> <span class="ConsWord">null</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">  76 </span>    <span class="SPChar">}</span></span>
<span class="line"><span class="LineNumber">  77 </span>    </span>
<span class="line"><span class="LineNumber">  78 </span><span class="SPChar">}</span></span>
</pre></div><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span>
<h2 id="head-e090601279e50497a2924c947848acb19439d187">Schema generale</h2>
<span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><p class="line886">La gestione di XMPP in ingresso nel client dovrebbe essere stratificata secondo i seguenti livelli: <span class="anchor" id="line-93"></span></p><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><pre>
<span class="anchor" id="line-96"></span>4       Applicazione
<span class="anchor" id="line-97"></span>  ------------------------
<span class="anchor" id="line-98"></span>3      XPath Ridotto
<span class="anchor" id="line-99"></span>  ------------------------
<span class="anchor" id="line-100"></span>2       Parser XML
<span class="anchor" id="line-101"></span>  ------------------------
<span class="anchor" id="line-102"></span>1  HTTP Su Bluetooth/GPRS
<span class="anchor" id="line-103"></span>
<span class="anchor" id="line-104"></span></pre><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><ol type="1"><li><p class="line886">L'adattatore BT/GPRS riceve un pacchetto (una risposta HTTP ad una sua request precente) <span class="anchor" id="line-107"></span></p></li><li><p class="line886">Il parser XML produce un albero DOM (kdom) del pacchetto.  <span class="anchor" id="line-108"></span></p></li><li><p class="line879">Estrae dal &lt;body/&gt; il pacchetto XMPP <span class="anchor" id="line-109"></span></p></li><li><p class="line886">Passa al modulo XPATH il pacchetto <span class="anchor" id="line-110"></span></p></li><li><p class="line886">Il modulo XPATH confronta il pacchetto con le query espresse dall'applicazione e chiama i listener registrati per quel tipo particolare di pacchetto <span class="anchor" id="line-111"></span></p><span class="anchor" id="line-112"></span></li></ol><p class="line886">In uscita il meccanismo è più semplice: <span class="anchor" id="line-113"></span></p><ol type="1"><li><p class="line886">l'applicazione prepara un pacchetto XMPP da inviare, usando kdom o un albero fatto con il nostro Element. <span class="anchor" id="line-114"></span></p></li><li><p class="line886">lo passa all'adattatore di rete (BT/gprs, non importa) <span class="anchor" id="line-115"></span></p></li><li><p class="line879">il pacchetto viene inglobato in un tag &lt;body/&gt; con tutti gli attributi specificati da HTTPBind <span class="anchor" id="line-116"></span></p></li><li><p class="line886">il tutto è serializzato e scritto su rete <span class="anchor" id="line-117"></span></p><span class="anchor" id="line-118"></span></li></ol>
<h2 id="head-2c90802242baf1b7b283aa957ffd400a75ebbf9c">Selzione stile XPATH</h2>
<span class="anchor" id="line-119"></span><p class="line886">Il modulo XPATH like deve aavere una interfaccia simile  <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-8e4b31f3a799f28a862b64cb4a1232952a279fcc_001\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-8e4b31f3a799f28a862b64cb4a1232952a279fcc_001" lang="en"><span class="line"><span class="LineNumber">   1 </span></span>
<span class="line"><span class="LineNumber">   2 </span> <span class="ResWord">public</span> <span class="ResWord">int</span> <span class="ID">addPacketListener</span><span class="SPChar">(</span><span class="ID">PacketQuery</span> <span class="ID">q</span><span class="SPChar">,</span> <span class="ID">PackListener</span> <span class="ID">l</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   3 </span> <span class="ResWord">public</span> <span class="ResWord">void</span> <span class="ID">removePacketListener</span><span class="SPChar">(</span><span class="ResWord">int</span> <span class="ID">registration</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   4 </span> <span class="ResWord">public</span> <span class="ResWord">void</span> <span class="ID">addOnetimePacketListener</span><span class="SPChar">(</span><span class="ID">PacketQuery</span> <span class="ID">q</span><span class="SPChar">,</span> <span class="ID">PackListener</span> <span class="ID">l</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
</pre></div><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><p class="line886">Il metodo "Onetime" a quello generale, l'unica differenza è che viene deregistrato automaticamente quando la query è verificata (utile per selezionare le risposte agli iq, la query è: dammi l'iq che ha id xyz, in xpath: /iq[@id='xyz']) <span class="anchor" id="line-128"></span></p><span class="anchor" id="line-129"></span><p class="line886">Il linguaggio di query deve verificare: <span class="anchor" id="line-130"></span></p><ol type="1"><li><p class="line879">un path di tag (es. un iq che ha un figlio item, /iq/item, che matcha cose del tipo &lt;iq&gt;&lt;item&gt;&lt;ciupa/&gt;&lt;/item&gt;&lt;pippo/&gt;&lt;/iq&gt;) <span class="anchor" id="line-131"></span></p></li><li><p class="line886">per ogni pezzo del path se il tag ha un attributo con un particolare attributo (ricordo che xmlns è un attributo, quindi verifico se si trova nel namespace corretto) <span class="anchor" id="line-132"></span></p><span class="anchor" id="line-133"></span></li></ol><p class="line879">Per non stare lì a parsificarsi XPATH, che non è banale, io useri una classe <a class="nonexistent nonexistent" href="/coso/wiki/moin.cgi/PacketQuery">PacketQuery</a>, ma più semplice di Smack: <span class="anchor" id="line-134"></span></p><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-532d8de495213e310a5f400edf314286c3a8d983_002\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-532d8de495213e310a5f400edf314286c3a8d983_002" lang="en"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">class</span> <span class="ID">PacketQuery</span><span class="SPChar">{</span></span>
<span class="line"><span class="LineNumber">   2 </span>   <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">tagname</span><span class="SPChar">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>   <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">attrnames</span><span class="SPChar">[</span><span class="SPChar">]</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   4 </span>   <span class="ResWord">public</span> <span class="ID">String</span> <span class="ID">attrvalues</span><span class="SPChar">[</span><span class="SPChar">]</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   5 </span>   <span class="ResWord">public</span> <span class="ID">PackeQuery</span> <span class="ID">child</span> <span class="SPChar">=</span> <span class="ConsWord">null</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   6 </span></span>
<span class="line"><span class="LineNumber">   7 </span>  <span class="ResWord">public</span> <span class="ID">PacketQuery</span><span class="SPChar">(</span><span class="ID">String</span> <span class="ID">name</span><span class="SPChar">,</span> <span class="ID">String</span> <span class="ID">attrnames</span><span class="SPChar">[</span><span class="SPChar">]</span><span class="SPChar">,</span> <span class="ID">String</span> <span class="ID">attrvalues</span><span class="SPChar">[</span><span class="SPChar">]</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   8 </span><span class="SPChar">}</span></span>
</pre></div><span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span><p class="line886">Questo dovrebbe essere bello sintentico, facile da costruire e matchare tutti i pacchetti che ci interessano. Ad esempio, per un pacchetto di auth di tipo get come questo <span class="anchor" id="line-147"></span></p><span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span><pre>&lt;iq id='ccc' type='get'&gt;
<span class="anchor" id="line-150"></span>  &lt;query xmlns='iq:auth'&gt;
<span class="anchor" id="line-151"></span>    &lt;username/&gt;
<span class="anchor" id="line-152"></span>  &lt;/query&gt;
<span class="anchor" id="line-153"></span>&lt;/iq&gt;
<span class="anchor" id="line-154"></span></pre><span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><p class="line879">La <a class="nonexistent nonexistent" href="/coso/wiki/moin.cgi/PacketQuery">PacketQuery</a> è: <span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span></p><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-32ebdc9134dff2926bc919ce9c71e43905f126a7_003\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-32ebdc9134dff2926bc919ce9c71e43905f126a7_003" lang="en"><span class="line"><span class="LineNumber">   1 </span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="ID">PacketQuery</span> <span class="ID">qIq</span> <span class="SPChar">=</span> <span class="ResWord">new</span> <span class="ID">PacketQuery</span><span class="SPChar">(</span><span class="String">"iq"</span><span class="SPChar">,</span> <span class="ResWord">new</span> <span class="ID">String</span><span class="SPChar">[</span><span class="SPChar">]</span> <span class="SPChar">{</span><span class="String">"type"</span><span class="SPChar">}</span><span class="SPChar">,</span> <span class="ResWord">new</span> <span class="ID">String</span><span class="SPChar">[</span><span class="SPChar">]</span> <span class="SPChar">{</span><span class="String">"get"</span><span class="SPChar">}</span><span class="SPChar">;</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   3 </span><span class="ID">qIq</span><span class="SPChar">.</span><span class="ID">child</span> <span class="SPChar">=</span> <span class="ResWord">new</span> <span class="ID">PacketQuery</span><span class="SPChar">(</span><span class="String">"query"</span><span class="SPChar">,</span> <span class="ResWord">new</span> <span class="ID">String</span><span class="SPChar">[</span><span class="SPChar">]</span> <span class="SPChar">{</span><span class="String">"xmlns"</span><span class="SPChar">}</span><span class="SPChar">,</span> <span class="ResWord">new</span> <span class="ID">String</span><span class="SPChar">[</span><span class="SPChar">]</span> <span class="SPChar">{</span><span class="String">"iq:auth"</span><span class="SPChar">}</span><span class="SPChar">;</span><span class="SPChar">)</span><span class="SPChar">;</span></span>
<span class="line"><span class="LineNumber">   4 </span></span>
</pre></div><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span>
<h2 id="head-2a0494f9ce508dc4acb91d48f6ae2d2fe0f5ee01">Esempio in Python</h2>
<span class="anchor" id="line-165"></span><p class="line886">In basso ci sono due classi sono in xish.domish in [ twisted.words]. Realizzano un parser XML pull tramite expat (SAX) che produce eventi verso le classi utilizzaztrici quando finisce un elmento di primo livello e quando viene aperto/chiuso il document (sono solo un esempio di come fare un DOM minimo con un parser SAX, ad eventi). Non serve avere degli oggetti specializzati (Presence, Messag, etc...) tipo Smack, in quanto appesantirebbero troppo le classi (dobbiamo risparmiare byte)  <span class="anchor" id="line-166"></span></p><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span><span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span><span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span><span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span><span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span><span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span><span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><span class="anchor" id="line-265"></span><span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span><span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span><span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span><span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span><span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span><span class="anchor" id="line-278"></span><span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><span class="anchor" id="line-282"></span><span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span><span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span><span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span><span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span><span class="anchor" id="line-312"></span><span class="anchor" id="line-313"></span><span class="anchor" id="line-314"></span><span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span><span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span><span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span><span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span><span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span><span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span><span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span><span class="anchor" id="line-346"></span><span class="anchor" id="line-347"></span><span class="anchor" id="line-348"></span><span class="anchor" id="line-349"></span><span class="anchor" id="line-350"></span><span class="anchor" id="line-351"></span><span class="anchor" id="line-352"></span><span class="anchor" id="line-353"></span><span class="anchor" id="line-354"></span><span class="anchor" id="line-355"></span><span class="anchor" id="line-356"></span><span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span><span class="anchor" id="line-360"></span><span class="anchor" id="line-361"></span><span class="anchor" id="line-362"></span><span class="anchor" id="line-363"></span><span class="anchor" id="line-364"></span><span class="anchor" id="line-365"></span><span class="anchor" id="line-366"></span><span class="anchor" id="line-367"></span><span class="anchor" id="line-368"></span><span class="anchor" id="line-369"></span><span class="anchor" id="line-370"></span><span class="anchor" id="line-371"></span><span class="anchor" id="line-372"></span><span class="anchor" id="line-373"></span><span class="anchor" id="line-374"></span><span class="anchor" id="line-375"></span><span class="anchor" id="line-376"></span><span class="anchor" id="line-377"></span><span class="anchor" id="line-378"></span><span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span><span class="anchor" id="line-381"></span><span class="anchor" id="line-382"></span><span class="anchor" id="line-383"></span><span class="anchor" id="line-384"></span><span class="anchor" id="line-385"></span><span class="anchor" id="line-386"></span><span class="anchor" id="line-387"></span><span class="anchor" id="line-388"></span><span class="anchor" id="line-389"></span><span class="anchor" id="line-390"></span><span class="anchor" id="line-391"></span><span class="anchor" id="line-392"></span><span class="anchor" id="line-393"></span><span class="anchor" id="line-394"></span><span class="anchor" id="line-395"></span><span class="anchor" id="line-396"></span><span class="anchor" id="line-397"></span><span class="anchor" id="line-398"></span><span class="anchor" id="line-399"></span><span class="anchor" id="line-400"></span><span class="anchor" id="line-401"></span><span class="anchor" id="line-402"></span><span class="anchor" id="line-403"></span><span class="anchor" id="line-404"></span><span class="anchor" id="line-405"></span><span class="anchor" id="line-406"></span><span class="anchor" id="line-407"></span><span class="anchor" id="line-408"></span><span class="anchor" id="line-409"></span><span class="anchor" id="line-410"></span><span class="anchor" id="line-411"></span><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-4f51adcf2b2fc2fcab5d104ca2889398b2b7bb94_004\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script>
<pre dir="ltr" id="CA-4f51adcf2b2fc2fcab5d104ca2889398b2b7bb94_004" lang="en"><span class="line"><span class="LineNumber">   1 </span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="ResWord">class</span> <span class="ID">Element</span><span class="Operator">(</span><span class="ID">object</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">   3 </span>    <span class="String">""" Object representing a container (a.k.a. tag or element) in an HTML or XML document.</span></span>
<span class="line"><span class="LineNumber">   4 </span><span class="String"></span></span>
<span class="line"><span class="LineNumber">   5 </span><span class="String">    An Element contains a series of attributes (name/value pairs), content</span></span>
<span class="line"><span class="LineNumber">   6 </span><span class="String">    (character data), and other child Element objects. When building a document</span></span>
<span class="line"><span class="LineNumber">   7 </span><span class="String">    with markup (such as HTML or XML), use this object as the starting point.</span></span>
<span class="line"><span class="LineNumber">   8 </span><span class="String"></span></span>
<span class="line"><span class="LineNumber">   9 </span><span class="String">    @type uri: L{str}</span></span>
<span class="line"><span class="LineNumber">  10 </span><span class="String">    @ivar uri: URI of this Element's name</span></span>
<span class="line"><span class="LineNumber">  11 </span><span class="String"></span></span>
<span class="line"><span class="LineNumber">  12 </span><span class="String">    @type defaultUri: L{str}</span></span>
<span class="line"><span class="LineNumber">  13 </span><span class="String">    @ivar defaultUri: URI this Element exists within</span></span>
<span class="line"><span class="LineNumber">  14 </span><span class="String"></span></span>
<span class="line"><span class="LineNumber">  15 </span><span class="String">    @type name: L{str}</span></span>
<span class="line"><span class="LineNumber">  16 </span><span class="String">    @ivar name: Name of this Element</span></span>
<span class="line"><span class="LineNumber">  17 </span><span class="String"></span></span>
<span class="line"><span class="LineNumber">  18 </span><span class="String">    @type children: L{list}</span></span>
<span class="line"><span class="LineNumber">  19 </span><span class="String">    @ivar children: List of child Elements and content</span></span>
<span class="line"><span class="LineNumber">  20 </span><span class="String"></span></span>
<span class="line"><span class="LineNumber">  21 </span><span class="String">    @type parent: L{Element}</span></span>
<span class="line"><span class="LineNumber">  22 </span><span class="String">    @ivar parent: Reference to the parent Element, if any.</span></span>
<span class="line"><span class="LineNumber">  23 </span><span class="String"></span></span>
<span class="line"><span class="LineNumber">  24 </span><span class="String">    @type attributes: L{dict}</span></span>
<span class="line"><span class="LineNumber">  25 </span><span class="String">    @ivar attributes: Dictionary of attributes associated with this Element.</span></span>
<span class="line"><span class="LineNumber">  26 </span><span class="String"></span></span>
<span class="line"><span class="LineNumber">  27 </span><span class="String">    """</span></span>
<span class="line"><span class="LineNumber">  28 </span>    <span class="ID">_idCounter</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber">  29 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">qname</span><span class="Operator">,</span> <span class="ID">defaultUri</span> <span class="Operator">=</span> <span class="ID">None</span><span class="Operator">,</span> <span class="ID">attribs</span> <span class="Operator">=</span> <span class="ID">None</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  30 </span>        <span class="String">"""</span></span>
<span class="line"><span class="LineNumber">  31 </span><span class="String">        @param qname: Tuple of (uri, name)</span></span>
<span class="line"><span class="LineNumber">  32 </span><span class="String">        @param defaultUri: The default URI of the element; defaults to the URI</span></span>
<span class="line"><span class="LineNumber">  33 </span><span class="String">                           specified in L{qname}</span></span>
<span class="line"><span class="LineNumber">  34 </span><span class="String">        @param attribs: Dictionary of attributes</span></span>
<span class="line"><span class="LineNumber">  35 </span><span class="String">        """</span></span>
<span class="line"><span class="LineNumber">  36 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">uri</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">name</span> <span class="Operator">=</span> <span class="ID">qname</span></span>
<span class="line"><span class="LineNumber">  37 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">defaultUri</span> <span class="Operator">=</span> <span class="ID">defaultUri</span> <span class="ResWord">or</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">uri</span></span>
<span class="line"><span class="LineNumber">  38 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span> <span class="Operator">=</span> <span class="ID">attribs</span> <span class="ResWord">or</span> <span class="Operator">{</span><span class="Operator">}</span></span>
<span class="line"><span class="LineNumber">  39 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span> <span class="Operator">=</span> <span class="Operator">[</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber">  40 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">parent</span> <span class="Operator">=</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber">  41 </span></span>
<span class="line"><span class="LineNumber">  42 </span>    <span class="ResWord">def</span> <span class="ID">__getattr__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">key</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  43 </span>        <span class="Comment"># Check child list for first Element with a name matching the key</span></span>
<span class="line"><span class="LineNumber">  44 </span><span class="Comment"></span>        <span class="ResWord">for</span> <span class="ID">n</span> <span class="ResWord">in</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  45 </span>            <span class="ResWord">if</span> <span class="ID">n</span><span class="Operator">.</span><span class="ID">__class__</span> <span class="Operator">==</span> <span class="ID">Element</span> <span class="ResWord">and</span> <span class="ID">n</span><span class="Operator">.</span><span class="ID">name</span> <span class="Operator">==</span> <span class="ID">key</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  46 </span>                <span class="ResWord">return</span> <span class="ID">n</span></span>
<span class="line"><span class="LineNumber">  47 </span></span>
<span class="line"><span class="LineNumber">  48 </span>        <span class="Comment"># Tweak the behaviour so that it's more friendly about not</span></span>
<span class="line"><span class="LineNumber">  49 </span><span class="Comment"></span>        <span class="Comment"># finding elements -- we need to document this somewhere :)</span></span>
<span class="line"><span class="LineNumber">  50 </span><span class="Comment"></span>        <span class="ResWord">return</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber">  51 </span></span>
<span class="line"><span class="LineNumber">  52 </span>    <span class="ResWord">def</span> <span class="ID">__getitem__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">key</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  53 </span>        <span class="ResWord">return</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span><span class="Operator">[</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">_dqa</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">)</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber">  54 </span></span>
<span class="line"><span class="LineNumber">  55 </span>    <span class="ResWord">def</span> <span class="ID">__delitem__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">key</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  56 </span>        <span class="ResWord">del</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span><span class="Operator">[</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">_dqa</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">)</span><span class="Operator">]</span><span class="Operator">;</span></span>
<span class="line"><span class="LineNumber">  57 </span></span>
<span class="line"><span class="LineNumber">  58 </span>    <span class="ResWord">def</span> <span class="ID">__setitem__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">key</span><span class="Operator">,</span> <span class="ID">value</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  59 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span><span class="Operator">[</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">_dqa</span><span class="Operator">(</span><span class="ID">key</span><span class="Operator">)</span><span class="Operator">]</span> <span class="Operator">=</span> <span class="ID">value</span></span>
<span class="line"><span class="LineNumber">  60 </span></span>
<span class="line"><span class="LineNumber">  61 </span>    <span class="ResWord">def</span> <span class="ID">__str__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  62 </span>        <span class="String">""" Retrieve the first CData (content) node </span></span>
<span class="line"><span class="LineNumber">  63 </span><span class="String">        """</span></span>
<span class="line"><span class="LineNumber">  64 </span>        <span class="ResWord">for</span> <span class="ID">n</span> <span class="ResWord">in</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  65 </span>            <span class="ResWord">if</span> <span class="ID">isinstance</span><span class="Operator">(</span><span class="ID">n</span><span class="Operator">,</span> <span class="ID">types</span><span class="Operator">.</span><span class="ID">StringTypes</span><span class="Operator">)</span><span class="Operator">:</span> <span class="ResWord">return</span> <span class="ID">n</span></span>
<span class="line"><span class="LineNumber">  66 </span>        <span class="ResWord">return</span> <span class="String">""</span></span>
<span class="line"><span class="LineNumber">  67 </span></span>
<span class="line"><span class="LineNumber">  68 </span>    <span class="ResWord">def</span> <span class="ID">_dqa</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">attr</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  69 </span>        <span class="String">""" Dequalify an attribute key as needed """</span></span>
<span class="line"><span class="LineNumber">  70 </span>        <span class="ResWord">if</span> <span class="ID">isinstance</span><span class="Operator">(</span><span class="ID">attr</span><span class="Operator">,</span> <span class="ID">types</span><span class="Operator">.</span><span class="ID">TupleType</span><span class="Operator">)</span> <span class="ResWord">and</span> <span class="ID">attr</span><span class="Operator">[</span><span class="Number">0</span><span class="Operator">]</span> <span class="Operator">==</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">uri</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  71 </span>            <span class="ResWord">return</span> <span class="ID">attr</span><span class="Operator">[</span><span class="Number">1</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber">  72 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  73 </span>            <span class="ResWord">return</span> <span class="ID">attr</span></span>
<span class="line"><span class="LineNumber">  74 </span></span>
<span class="line"><span class="LineNumber">  75 </span>    <span class="ResWord">def</span> <span class="ID">getAttribute</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">attribname</span><span class="Operator">,</span> <span class="ID">default</span> <span class="Operator">=</span> <span class="ID">None</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  76 </span>        <span class="String">""" Retrieve the value of attribname, if it exists """</span></span>
<span class="line"><span class="LineNumber">  77 </span>        <span class="ResWord">return</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span><span class="Operator">.</span><span class="ID">get</span><span class="Operator">(</span><span class="ID">attribname</span><span class="Operator">,</span> <span class="ID">default</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  78 </span></span>
<span class="line"><span class="LineNumber">  79 </span>    <span class="ResWord">def</span> <span class="ID">hasAttribute</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">attrib</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  80 </span>        <span class="String">""" Determine if the specified attribute exists """</span></span>
<span class="line"><span class="LineNumber">  81 </span>        <span class="ResWord">return</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span><span class="Operator">.</span><span class="ID">has_key</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">_dqa</span><span class="Operator">(</span><span class="ID">attrib</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber">  82 </span></span>
<span class="line"><span class="LineNumber">  83 </span>    <span class="ResWord">def</span> <span class="ID">compareAttribute</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">attrib</span><span class="Operator">,</span> <span class="ID">value</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  84 </span>        <span class="String">""" Safely compare the value of an attribute against a provided value.</span></span>
<span class="line"><span class="LineNumber">  85 </span><span class="String">        </span></span>
<span class="line"><span class="LineNumber">  86 </span><span class="String">        C{None}-safe.</span></span>
<span class="line"><span class="LineNumber">  87 </span><span class="String">        """</span></span>
<span class="line"><span class="LineNumber">  88 </span>        <span class="ResWord">return</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span><span class="Operator">.</span><span class="ID">get</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">_dqa</span><span class="Operator">(</span><span class="ID">attrib</span><span class="Operator">)</span><span class="Operator">,</span> <span class="ID">None</span><span class="Operator">)</span> <span class="Operator">==</span> <span class="ID">value</span></span>
<span class="line"><span class="LineNumber">  89 </span></span>
<span class="line"><span class="LineNumber">  90 </span>    <span class="ResWord">def</span> <span class="ID">swapAttributeValues</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">left</span><span class="Operator">,</span> <span class="ID">right</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  91 </span>        <span class="String">""" Swap the values of two attribute. """</span></span>
<span class="line"><span class="LineNumber">  92 </span>        <span class="ID">d</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span></span>
<span class="line"><span class="LineNumber">  93 </span>        <span class="ID">l</span> <span class="Operator">=</span> <span class="ID">d</span><span class="Operator">[</span><span class="ID">left</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber">  94 </span>        <span class="ID">d</span><span class="Operator">[</span><span class="ID">left</span><span class="Operator">]</span> <span class="Operator">=</span> <span class="ID">d</span><span class="Operator">[</span><span class="ID">right</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber">  95 </span>        <span class="ID">d</span><span class="Operator">[</span><span class="ID">right</span><span class="Operator">]</span> <span class="Operator">=</span> <span class="ID">l</span></span>
<span class="line"><span class="LineNumber">  96 </span></span>
<span class="line"><span class="LineNumber">  97 </span>    <span class="ResWord">def</span> <span class="ID">addChild</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">node</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber">  98 </span>        <span class="String">""" Add a child to this Element. """</span></span>
<span class="line"><span class="LineNumber">  99 </span>        <span class="ResWord">if</span> <span class="ID">node</span><span class="Operator">.</span><span class="ID">__class__</span> <span class="Operator">==</span> <span class="ID">Element</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 100 </span>            <span class="ID">node</span><span class="Operator">.</span><span class="ID">parent</span> <span class="Operator">=</span> <span class="ID">self</span></span>
<span class="line"><span class="LineNumber"> 101 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="ID">node</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 102 </span>        <span class="ResWord">return</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">[</span><span class="Operator">-</span><span class="Number">1</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber"> 103 </span></span>
<span class="line"><span class="LineNumber"> 104 </span>    <span class="ResWord">def</span> <span class="ID">addContent</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">text</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 105 </span>        <span class="String">""" Add some text data to this Element. """</span></span>
<span class="line"><span class="LineNumber"> 106 </span>        <span class="ID">c</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span></span>
<span class="line"><span class="LineNumber"> 107 </span>        <span class="ResWord">if</span> <span class="ID">len</span><span class="Operator">(</span><span class="ID">c</span><span class="Operator">)</span> <span class="Operator">&gt;</span> <span class="Number">0</span> <span class="ResWord">and</span> <span class="ID">isinstance</span><span class="Operator">(</span><span class="ID">c</span><span class="Operator">[</span><span class="Operator">-</span><span class="Number">1</span><span class="Operator">]</span><span class="Operator">,</span> <span class="ID">types</span><span class="Operator">.</span><span class="ID">StringTypes</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 108 </span>            <span class="ID">c</span><span class="Operator">[</span><span class="Operator">-</span><span class="Number">1</span><span class="Operator">]</span> <span class="Operator">=</span> <span class="ID">c</span><span class="Operator">[</span><span class="Operator">-</span><span class="Number">1</span><span class="Operator">]</span> <span class="Operator">+</span> <span class="ID">text</span></span>
<span class="line"><span class="LineNumber"> 109 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 110 </span>            <span class="ID">c</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="ID">text</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 111 </span>        <span class="ResWord">return</span> <span class="ID">c</span><span class="Operator">[</span><span class="Operator">-</span><span class="Number">1</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber"> 112 </span></span>
<span class="line"><span class="LineNumber"> 113 </span>    <span class="ResWord">def</span> <span class="ID">addElement</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">name</span><span class="Operator">,</span> <span class="ID">defaultUri</span> <span class="Operator">=</span> <span class="ID">None</span><span class="Operator">,</span> <span class="ID">content</span> <span class="Operator">=</span> <span class="ID">None</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 114 </span>        <span class="String">""" Add a new child Element to this Element.</span></span>
<span class="line"><span class="LineNumber"> 115 </span><span class="String">        </span></span>
<span class="line"><span class="LineNumber"> 116 </span><span class="String">        Preferred method.</span></span>
<span class="line"><span class="LineNumber"> 117 </span><span class="String">        """</span></span>
<span class="line"><span class="LineNumber"> 118 </span>        <span class="ID">result</span> <span class="Operator">=</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber"> 119 </span>        <span class="ResWord">if</span> <span class="ID">isinstance</span><span class="Operator">(</span><span class="ID">name</span><span class="Operator">,</span> <span class="ID">type</span><span class="Operator">(</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">)</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 120 </span>            <span class="ID">defaultUri</span> <span class="Operator">=</span> <span class="ID">defaultUri</span> <span class="ResWord">or</span> <span class="ID">name</span><span class="Operator">[</span><span class="Number">0</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber"> 121 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="ID">Element</span><span class="Operator">(</span><span class="ID">name</span><span class="Operator">,</span> <span class="ID">defaultUri</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 122 </span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 123 </span>            <span class="ID">defaultUri</span> <span class="Operator">=</span> <span class="ID">defaultUri</span> <span class="ResWord">or</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">defaultUri</span></span>
<span class="line"><span class="LineNumber"> 124 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="ID">Element</span><span class="Operator">(</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">uri</span><span class="Operator">,</span> <span class="ID">name</span><span class="Operator">)</span><span class="Operator">,</span> <span class="ID">defaultUri</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 125 </span></span>
<span class="line"><span class="LineNumber"> 126 </span>        <span class="ID">result</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">[</span><span class="Operator">-</span><span class="Number">1</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber"> 127 </span>        <span class="ID">result</span><span class="Operator">.</span><span class="ID">parent</span> <span class="Operator">=</span> <span class="ID">self</span></span>
<span class="line"><span class="LineNumber"> 128 </span></span>
<span class="line"><span class="LineNumber"> 129 </span>        <span class="ResWord">if</span> <span class="ID">content</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 130 </span>            <span class="ID">result</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="ID">content</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 131 </span></span>
<span class="line"><span class="LineNumber"> 132 </span>        <span class="ResWord">return</span> <span class="ID">result</span></span>
<span class="line"><span class="LineNumber"> 133 </span></span>
<span class="line"><span class="LineNumber"> 134 </span>    <span class="ResWord">def</span> <span class="ID">addRawXml</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">rawxmlstring</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 135 </span>        <span class="String">""" Add a pre-serialized chunk o' XML as a child of this Element. """</span></span>
<span class="line"><span class="LineNumber"> 136 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="ID">SerializedXML</span><span class="Operator">(</span><span class="ID">rawxmlstring</span><span class="Operator">)</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 137 </span></span>
<span class="line"><span class="LineNumber"> 138 </span>    <span class="ResWord">def</span> <span class="ID">addUniqueId</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 139 </span>        <span class="String">""" Add a unique (across a given Python session) id attribute to this</span></span>
<span class="line"><span class="LineNumber"> 140 </span><span class="String">            Element.</span></span>
<span class="line"><span class="LineNumber"> 141 </span><span class="String">        """</span></span>
<span class="line"><span class="LineNumber"> 142 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">attributes</span><span class="Operator">[</span><span class="String">"id"</span><span class="Operator">]</span> <span class="Operator">=</span> <span class="String">"H_%d"</span> <span class="Operator">%</span> <span class="ID">Element</span><span class="Operator">.</span><span class="ID">_idCounter</span></span>
<span class="line"><span class="LineNumber"> 143 </span>        <span class="ID">Element</span><span class="Operator">.</span><span class="ID">_idCounter</span> <span class="Operator">=</span> <span class="ID">Element</span><span class="Operator">.</span><span class="ID">_idCounter</span> <span class="Operator">+</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber"> 144 </span></span>
<span class="line"><span class="LineNumber"> 145 </span>    <span class="ResWord">def</span> <span class="ID">elements</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 146 </span>        <span class="String">""" Iterate across all children of this Element that are Elements. """</span></span>
<span class="line"><span class="LineNumber"> 147 </span>        <span class="ResWord">return</span> <span class="ID">generateOnlyKlass</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">,</span> <span class="ID">Element</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 148 </span></span>
<span class="line"><span class="LineNumber"> 149 </span>    <span class="ResWord">def</span> <span class="ID">toXml</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">prefixes</span> <span class="Operator">=</span> <span class="ID">None</span><span class="Operator">,</span> <span class="ID">closeElement</span> <span class="Operator">=</span> <span class="Number">1</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 150 </span>        <span class="String">""" Serialize this Element and all children to a string. """</span></span>
<span class="line"><span class="LineNumber"> 151 </span>        <span class="ID">s</span> <span class="Operator">=</span> <span class="ID">SerializerClass</span><span class="Operator">(</span><span class="ID">prefixes</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 152 </span>        <span class="ID">s</span><span class="Operator">.</span><span class="ID">serialize</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">closeElement</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 153 </span>        <span class="ResWord">return</span> <span class="ID">s</span><span class="Operator">.</span><span class="ID">getValue</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 154 </span></span>
<span class="line"><span class="LineNumber"> 155 </span>    <span class="ResWord">def</span> <span class="ID">firstChildElement</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 156 </span>        <span class="ResWord">for</span> <span class="ID">c</span> <span class="ResWord">in</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 157 </span>            <span class="ResWord">if</span> <span class="ID">c</span><span class="Operator">.</span><span class="ID">__class__</span> <span class="Operator">==</span> <span class="ID">Element</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 158 </span>                <span class="ResWord">return</span> <span class="ID">c</span></span>
<span class="line"><span class="LineNumber"> 159 </span>        <span class="ResWord">return</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber"> 160 </span></span>
<span class="line"><span class="LineNumber"> 161 </span><span class="ResWord">class</span> <span class="ID">ExpatElementStream</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 162 </span>    <span class="ResWord">def</span> <span class="ID">__init__</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 163 </span>        <span class="ResWord">import</span> <span class="ID">pyexpat</span></span>
<span class="line"><span class="LineNumber"> 164 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">DocumentStartEvent</span> <span class="Operator">=</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber"> 165 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">ElementEvent</span> <span class="Operator">=</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber"> 166 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">DocumentEndEvent</span> <span class="Operator">=</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber"> 167 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">error</span> <span class="Operator">=</span> <span class="ID">pyexpat</span><span class="Operator">.</span><span class="ID">error</span></span>
<span class="line"><span class="LineNumber"> 168 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">parser</span> <span class="Operator">=</span> <span class="ID">pyexpat</span><span class="Operator">.</span><span class="ID">ParserCreate</span><span class="Operator">(</span><span class="String">"UTF-8"</span><span class="Operator">,</span> <span class="String">" "</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 169 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">parser</span><span class="Operator">.</span><span class="ID">StartElementHandler</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">_onStartElement</span></span>
<span class="line"><span class="LineNumber"> 170 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">parser</span><span class="Operator">.</span><span class="ID">EndElementHandler</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">_onEndElement</span></span>
<span class="line"><span class="LineNumber"> 171 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">parser</span><span class="Operator">.</span><span class="ID">CharacterDataHandler</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">_onCdata</span></span>
<span class="line"><span class="LineNumber"> 172 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">parser</span><span class="Operator">.</span><span class="ID">StartNamespaceDeclHandler</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">_onStartNamespace</span></span>
<span class="line"><span class="LineNumber"> 173 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">parser</span><span class="Operator">.</span><span class="ID">EndNamespaceDeclHandler</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">_onEndNamespace</span></span>
<span class="line"><span class="LineNumber"> 174 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span> <span class="Operator">=</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber"> 175 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">defaultNsStack</span> <span class="Operator">=</span> <span class="Operator">[</span><span class="ID">None</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber"> 176 </span>        <span class="ID">self</span><span class="Operator">.</span><span class="ID">documentStarted</span> <span class="Operator">=</span> <span class="Number">0</span></span>
<span class="line"><span class="LineNumber"> 177 </span></span>
<span class="line"><span class="LineNumber"> 178 </span>    <span class="ResWord">def</span> <span class="ID">parse</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">buffer</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 179 </span>        <span class="ResWord">try</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 180 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">parser</span><span class="Operator">.</span><span class="ID">Parse</span><span class="Operator">(</span><span class="ID">buffer</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 181 </span>        <span class="ResWord">except</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">error</span><span class="Operator">,</span> <span class="ID">e</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 182 </span>            <span class="ResWord">raise</span> <span class="ID">ParserError</span><span class="Operator">,</span> <span class="ID">str</span><span class="Operator">(</span><span class="ID">e</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 183 </span></span>
<span class="line"><span class="LineNumber"> 184 </span>    <span class="ResWord">def</span> <span class="ID">_onStartElement</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">name</span><span class="Operator">,</span> <span class="ID">attrs</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 185 </span>        <span class="Comment"># Generate a qname tuple from the provided name</span></span>
<span class="line"><span class="LineNumber"> 186 </span><span class="Comment"></span>        <span class="ID">qname</span> <span class="Operator">=</span> <span class="ID">name</span><span class="Operator">.</span><span class="ID">split</span><span class="Operator">(</span><span class="String">" "</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 187 </span>        <span class="ResWord">if</span> <span class="ID">len</span><span class="Operator">(</span><span class="ID">qname</span><span class="Operator">)</span> <span class="Operator">==</span> <span class="Number">1</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 188 </span>            <span class="ID">qname</span> <span class="Operator">=</span> <span class="Operator">(</span><span class="ID">None</span><span class="Operator">,</span> <span class="ID">name</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 189 </span></span>
<span class="line"><span class="LineNumber"> 190 </span>        <span class="Comment"># Process attributes</span></span>
<span class="line"><span class="LineNumber"> 191 </span><span class="Comment"></span>        <span class="ResWord">for</span> <span class="ID">k</span><span class="Operator">,</span> <span class="ID">v</span> <span class="ResWord">in</span> <span class="ID">attrs</span><span class="Operator">.</span><span class="ID">items</span><span class="Operator">(</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 192 </span>            <span class="ResWord">if</span> <span class="ID">k</span><span class="Operator">.</span><span class="ID">find</span><span class="Operator">(</span><span class="String">" "</span><span class="Operator">)</span> <span class="Operator">!=</span> <span class="Operator">-</span><span class="Number">1</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 193 </span>                <span class="ID">aqname</span> <span class="Operator">=</span> <span class="ID">k</span><span class="Operator">.</span><span class="ID">split</span><span class="Operator">(</span><span class="String">" "</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 194 </span>                <span class="ID">attrs</span><span class="Operator">[</span><span class="Operator">(</span><span class="ID">aqname</span><span class="Operator">[</span><span class="Number">0</span><span class="Operator">]</span><span class="Operator">,</span> <span class="ID">aqname</span><span class="Operator">[</span><span class="Number">1</span><span class="Operator">]</span><span class="Operator">)</span><span class="Operator">]</span> <span class="Operator">=</span> <span class="ID">v</span></span>
<span class="line"><span class="LineNumber"> 195 </span>                <span class="ResWord">del</span> <span class="ID">attrs</span><span class="Operator">[</span><span class="ID">k</span><span class="Operator">]</span></span>
<span class="line"><span class="LineNumber"> 196 </span></span>
<span class="line"><span class="LineNumber"> 197 </span>        <span class="Comment"># Construct the new element</span></span>
<span class="line"><span class="LineNumber"> 198 </span><span class="Comment"></span>        <span class="ID">e</span> <span class="Operator">=</span> <span class="ID">Element</span><span class="Operator">(</span><span class="ID">qname</span><span class="Operator">,</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">defaultNsStack</span><span class="Operator">[</span><span class="Operator">-</span><span class="Number">1</span><span class="Operator">]</span><span class="Operator">,</span> <span class="ID">attrs</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 199 </span></span>
<span class="line"><span class="LineNumber"> 200 </span>        <span class="Comment"># Document already started</span></span>
<span class="line"><span class="LineNumber"> 201 </span><span class="Comment"></span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">documentStarted</span> <span class="Operator">==</span> <span class="Number">1</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 202 </span>            <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span> <span class="Operator">!=</span> <span class="ID">None</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 203 </span>                <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span><span class="Operator">.</span><span class="ID">children</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="ID">e</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 204 </span>                <span class="ID">e</span><span class="Operator">.</span><span class="ID">parent</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span></span>
<span class="line"><span class="LineNumber"> 205 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span> <span class="Operator">=</span> <span class="ID">e</span></span>
<span class="line"><span class="LineNumber"> 206 </span></span>
<span class="line"><span class="LineNumber"> 207 </span>        <span class="Comment"># New document</span></span>
<span class="line"><span class="LineNumber"> 208 </span><span class="Comment"></span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 209 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">documentStarted</span> <span class="Operator">=</span> <span class="Number">1</span></span>
<span class="line"><span class="LineNumber"> 210 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">DocumentStartEvent</span><span class="Operator">(</span><span class="ID">e</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 211 </span></span>
<span class="line"><span class="LineNumber"> 212 </span>    <span class="ResWord">def</span> <span class="ID">_onEndElement</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">_</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 213 </span>        <span class="Comment"># Check for null current elem; end of doc</span></span>
<span class="line"><span class="LineNumber"> 214 </span><span class="Comment"></span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span> <span class="Operator">==</span> <span class="ID">None</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 215 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">DocumentEndEvent</span><span class="Operator">(</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 216 </span></span>
<span class="line"><span class="LineNumber"> 217 </span>        <span class="Comment"># Check for parent that is None; that's</span></span>
<span class="line"><span class="LineNumber"> 218 </span><span class="Comment"></span>        <span class="Comment"># the top of the stack</span></span>
<span class="line"><span class="LineNumber"> 219 </span><span class="Comment"></span>        <span class="ResWord">elif</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span><span class="Operator">.</span><span class="ID">parent</span> <span class="Operator">==</span> <span class="ID">None</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 220 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">ElementEvent</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 221 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span> <span class="Operator">=</span> <span class="ID">None</span></span>
<span class="line"><span class="LineNumber"> 222 </span></span>
<span class="line"><span class="LineNumber"> 223 </span>        <span class="Comment"># Anything else is just some element in the current</span></span>
<span class="line"><span class="LineNumber"> 224 </span><span class="Comment"></span>        <span class="Comment"># packet wrapping up</span></span>
<span class="line"><span class="LineNumber"> 225 </span><span class="Comment"></span>        <span class="ResWord">else</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 226 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span> <span class="Operator">=</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span><span class="Operator">.</span><span class="ID">parent</span></span>
<span class="line"><span class="LineNumber"> 227 </span></span>
<span class="line"><span class="LineNumber"> 228 </span>    <span class="ResWord">def</span> <span class="ID">_onCdata</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">data</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 229 </span>        <span class="ResWord">if</span> <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span> <span class="Operator">!=</span> <span class="ID">None</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 230 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">currElem</span><span class="Operator">.</span><span class="ID">addContent</span><span class="Operator">(</span><span class="ID">data</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 231 </span></span>
<span class="line"><span class="LineNumber"> 232 </span>    <span class="ResWord">def</span> <span class="ID">_onStartNamespace</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">prefix</span><span class="Operator">,</span> <span class="ID">uri</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 233 </span>        <span class="Comment"># If this is the default namespace, put</span></span>
<span class="line"><span class="LineNumber"> 234 </span><span class="Comment"></span>        <span class="Comment"># it on the stack</span></span>
<span class="line"><span class="LineNumber"> 235 </span><span class="Comment"></span>        <span class="ResWord">if</span> <span class="ID">prefix</span> <span class="Operator">==</span> <span class="ID">None</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 236 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">defaultNsStack</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="ID">uri</span><span class="Operator">)</span></span>
<span class="line"><span class="LineNumber"> 237 </span></span>
<span class="line"><span class="LineNumber"> 238 </span>    <span class="ResWord">def</span> <span class="ID">_onEndNamespace</span><span class="Operator">(</span><span class="ID">self</span><span class="Operator">,</span> <span class="ID">prefix</span><span class="Operator">)</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 239 </span>        <span class="Comment"># Remove last element on the stack</span></span>
<span class="line"><span class="LineNumber"> 240 </span><span class="Comment"></span>        <span class="ResWord">if</span> <span class="ID">prefix</span> <span class="Operator">==</span> <span class="ID">None</span><span class="Operator">:</span></span>
<span class="line"><span class="LineNumber"> 241 </span>            <span class="ID">self</span><span class="Operator">.</span><span class="ID">defaultNsStack</span><span class="Operator">.</span><span class="ID">pop</span><span class="Operator">(</span><span class="Operator">)</span><span class="Text"></span></span>
</pre></div><span class="anchor" id="line-412"></span><span class="anchor" id="bottom"></span></div><p id="pageinfo" class="info" lang="it" dir="ltr">ParserXMLJ2Me  (l'ultima modifica è del 2005-12-28 23:03:01, fatta da <span title="SciaSbat @ 213-156-52-110.fastres.net[213.156.52.110]"><a class="nonexistent nonexistent" href="/coso/wiki/moin.cgi/SciaSbat" title="SciaSbat @ 213-156-52-110.fastres.net[213.156.52.110]">SciaSbat</a></span>)</p>

<div id="pagebottom"></div>
</div>


<div id="footer"><ul class="editbar"><li><a name="texteditlink" href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=edit&amp;editor=text">Edit (Text)</a></li></ul><p><a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=refresh">CancellaFileTemporanei</a> (2006-03-19 18:16:17 in cache)</p><p>Oppure prova una di queste azioni: <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=AttachFile">Attach File</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=DeletePage">Cancella Pagina</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=Despam">Despam</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=LikePages">Like Pages</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=LocalSiteMap">Local Site Map</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=MyPages">My Pages</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=PackagePages">Package Pages</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=RenamePage">Rinomina Pagina</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=RenderAsDocbook">Render As Docbook</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=SpellCheck">Spell Check</a>, <a href="/coso/wiki/moin.cgi/ParserXMLJ2Me?action=SubscribeUser">Subscribe User</a></p>
</div>
<ul id="credits">
<li><a href="http://moinmoin.wikiwikiweb.de/">MoinMoin Powered</a></li><li><a href="http://www.python.org/">Python Powered</a></li><li><a href="http://validator.w3.org/check?uri=referer">Valid HTML 4.01</a></li>
</ul>


<ul id="timings">
<li>getACL = 0.007s</li>
<li>run = 0.626s</li>
<li>send_page = 0.614s</li>
<li>send_page_content = 0.410s</li>
<li>total = 0.661s</li>
</ul>
</body>
</html>

